#!groovy

properties([
    [
        $class: 'GithubProjectProperty',
        displayName: 'Divorce Case Formatter Service',
        projectUrlStr: 'https://github.com/hmcts/div-case-formatter-service'
    ],
    pipelineTriggers([
        [$class: 'GitHubPushTrigger']
    ])
])

@Library("Infrastructure@hmctsdemo")

def type = "java"
def product = "div"
def component = "cfs"

def channel = '#div-dev'

withPipeline(type , product, component) {
    if (env.CHANGE_TITLE && !env.CHANGE_TITLE.startsWith('[PREVIEW]')) {
        enableDockerBuild()
        enableDeployToAKS()
    }

    after('checkout') {
        echo '${product}-${component} checked out'
    }

    enableSlackNotifications(channel)
}
